---
permalink: a800/controller-replace-move-hardware.html 
sidebar: sidebar 
keywords: aff a800, move the controller module hardware 
summary: 要更换控制器模块，您必须卸下受损的控制器，将 FRU 组件移至更换控制器模块，在机箱中安装更换控制器模块，然后将系统启动至维护模式。 
---
= 更换控制器模块硬件— AFF A800
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
当硬件故障需要更换时，请更换AFF A800系统中的控制器。更换过程包括移除受损的控制器、将组件移至更换的控制器、安装更换的控制器以及重新启动它。



== 第 1 步：卸下控制器模块

在更换控制器模块或更换控制器模块内的组件时，您必须从机箱中卸下控制器模块。

.步骤
. 如果您尚未接地，请正确接地。
. 使用拇指推动每个驱动器、直至感觉到强制停止、以确保机箱中的所有驱动器都牢固地固定在中板上。
+
.视频 - 确认驾驶员座椅
video::2c46e4af-2c21-4f12-b065-b38b003d0ea2[panopto]
+
image::../media/drw_a800_drive_seated_IEOPS-960.svg[将驱动器安装到位]

. 根据系统状态检查控制器驱动器：
+
.. 在运行正常的控制器上，检查是否存在任何处于降级状态、故障状态或两者兼有的状态：
+
[source, cli]
----
storage aggregate show -raidstatus !*normal*
----
+
*** 如果命令返回 `There are no entries matching your query.`继续<<Check-missing-drives,进入下一个子步骤，检查是否存在缺失的驱动器。>>。
*** 如果该命令返回任何其他结果，请从两个控制器收集AutoSupport数据，并联系NetApp支持部门以获取进一步帮助。
+
[source, cli]
----
system node autosupport invoke -node * -type all -message '<message_name>'
----


.. [[检查缺失驱动器]]检查文件系统或备用驱动器是否存在缺失驱动器问题：
+
[source, cli]
----
event log show -severity * -node * -message-name *disk.missing*
----
+
*** 如果命令返回 `There are no entries matching your query.`继续<<remove-power-cables,进入下一步>>。
*** 如果该命令返回任何其他结果，请从两个控制器收集AutoSupport数据，并联系NetApp支持部门以获取进一步帮助。
+
[source, cli]
----
system node autosupport invoke -node * -type all -message '<message_name>'
----




. [[移除电源线]]移除电源线固定器，然后从电源上拔下电源线。
. 松开线缆管理装置上的魔术贴绑带。从控制器模块上拔下系统电缆和 SFP/QSFP 模块（如果需要）。记下每根电缆的位置。
+
将缆线留在缆线管理设备中，以便在重新安装缆线管理设备时，缆线排列有序。

. 将缆线管理设备从控制器模块中取出并放在一旁。
. 向下按两个锁定闩锁，然后同时向下旋转两个闩锁。
+
此控制器模块会从机箱中略微移出。

+
image::../media/drw_a800_pcm_remove.png[Removing the controller module]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["标注编号1"]
 a| 
锁定闩锁



 a| 
image:../media/icon_round_2.png["标注编号2"]
 a| 
锁定销

|===
. 将控制器模块滑出机箱、然后将其放在平稳的表面上。
+
托住控制器模块的底部，将其从机箱中滑出。





== 第 2 步：移动电源

将电源移至替换控制器模块。

.步骤
. 旋转凸轮把手，以便在按下锁定卡舌的同时，可以将电源从控制器模块中拉出。
+

CAUTION: 电源不足。从控制器模块中取出时，请始终用双手托住它，以免它突然从控制器模块中自由转动并给您造成损害。

+
image::../media/drw_a800_replace_psu.svg[卸下或更换电源]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["标注编号1"]
 a| 
蓝色电源锁定卡舌



 a| 
image:../media/icon_round_2.png["标注编号2"]
 a| 
电源

|===
. 将电源移至新控制器模块，然后安装它。
. 用双手支撑电源边缘并将其与控制器模块的开口对齐，然后将电源轻轻推入控制器模块，直到锁定卡舌卡入到位。
+
电源只能与内部连接器正确接合并单向锁定到位。

+

NOTE: 为避免损坏内部连接器，请勿在将电源滑入系统时用力过大。





== 第 3 步：移动风扇

将风扇模块移至替换控制器模块。

.步骤
. 通过挤压风扇模块侧面的锁定卡舌，然后将风扇模块直接从控制器模块中提出来卸下风扇模块。
+
image::../media/drw_a800_replace_fan.png[卸下风扇]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["标注编号1"]
 a| 
风扇锁定卡舌



 a| 
image:../media/icon_round_2.png["标注编号2"]
 a| 
风扇模块

|===
. 将风扇模块移至更换用的控制器模块，然后通过将风扇模块的边缘与控制器模块中的开口对齐来安装此风扇模块，然后将此风扇模块滑入控制器模块，直到锁定闩锁卡入到位为止。
. 对其余风扇模块重复上述步骤。




== 第 4 步：移动 NVDIMM 电池

将NVDIMM电池移至替换控制器模块。

.步骤
. 打开通风管盖并在提升板中找到 NVDIMM 电池。
+
image::../media/drw_a800_nvdimm_battery_replace.png[更换NVDIMM电池]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["标注编号1"]
 a| 
通风管竖板



 a| 
image:../media/icon_round_2.png["标注编号2"]
 a| 
NVDIMM 电池插头



 a| 
image:../media/icon_round_3.png["标注编号3"]
 a| 
NVDIMM 电池组

|===
+
* 注意： * 在暂停系统时， NVDIMM 电池控制板 LED 会闪烁，同时将内容存入闪存。目标值完成后，此 LED 将熄灭。

. 找到电池插头，然后挤压电池插头正面的夹子，将插头从插槽中释放，然后从插槽中拔下电池缆线。
. 抓住电池并将电池从通风管和控制器模块中提出。
. 将电池组移至替代控制器模块，然后将其安装到 NVDIMM 通风管中：
+
.. 将电池组插入插槽，然后用力向下按电池组，以确保其锁定到位。
.. 将电池插头插入提升板插槽，并确保插头锁定到位。






== 第 5 步：卸下 PCIe 提升板

从故障控制器模块上移除 PCIe 转接卡。

.步骤
. 从控制器模块中卸下 PCIe 提升板：
+
.. 卸下 PCIe 卡中可能存在的所有 SFP 或 QSFP 模块。
.. 将提升板左侧的提升板锁定闩锁向上旋转并朝风扇模块方向旋转。
+
此竖板会从控制器模块中略微升高。

.. 抬起竖板，将其移向风扇，使竖板上的金属片边缘脱离控制器模块的边缘，将其从控制器模块中提出，然后将其放在平稳的平面上。
+
image::../media/drw_a800_riser_2_3_remove.png[卸下Riser卡2和3]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["标注编号1"]
 a| 
通风管



 a| 
image:../media/icon_round_2.png["标注编号2"]
 a| 
提升板 1 （左提升板），提升板 2 （中间提升板）和 3 （右提升板）锁定闩锁

|===


. 对受损控制器模块中的其余提升板重复上述步骤。
. 对更换用的控制器中的空提升板重复上述步骤，然后将其放好。




== 第 6 步：移动系统 DIMM

将系统 DIMM 移至替换控制器模块。

.步骤
. 记下插槽中 DIMM 的方向，以便可以按正确的方向将 DIMM 插入更换用的控制器模块中。
. 缓慢推动 DIMM 两侧的两个 DIMM 弹出卡舌，将 DIMM 从插槽中弹出，然后将 DIMM 滑出插槽。
+

NOTE: 小心握住 DIMM 的边缘，以避免对 DIMM 电路板上的组件施加压力。

. 找到要安装 DIMM 的插槽。
. 将 DIMM 垂直插入插槽。
+
DIMM 紧紧固定在插槽中，但应很容易插入。如果没有，请将 DIMM 与插槽重新对齐并重新插入。

+

NOTE: 目视检查 DIMM ，确认其均匀对齐并完全插入插槽。

. 小心而稳固地推动 DIMM 的上边缘，直到弹出器卡舌卡入到位，卡入到位于 DIMM 两端的缺口上。
. 对其余 DIMM 重复上述步骤。




== 第 7 步：移动 NVDIMM

将 NVDIMMS 移至替换控制器模块。

.步骤
. 找到控制器模块上的 NVDIMM 。
+
image::../media/drw_a800_no_risers_nvdimm_move.svg[移动NVDIMM]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["标注编号1"]
 a| 
通风管



 a| 
image:../media/icon_round_2.png["标注编号2"]
 a| 
NVDIMM

|===
. 记下插槽中 NVDIMM 的方向，以便可以按正确的方向将 NVDIMM 插入更换用的控制器模块中。
. 缓慢推离 NVDIMM 两侧的两个 NVDIMM 弹出卡舌，将 NVDIMM 从插槽中弹出，然后将 NVDIMM 滑出插槽并放在一旁。
+

NOTE: 小心握住 NVDIMM 的边缘，以避免对 NVDIMM 电路板上的组件施加压力。

. 找到要安装 NVDIMM 的插槽。
. 将 NVDIMM 垂直插入插槽。
+
NVDIMM 紧紧固定在插槽中，但应易于插入。如果没有，请将 NVDIMM 与插槽重新对齐并重新插入。

+

NOTE: 目视检查 NVDIMM ，确认其已均匀对齐并完全插入插槽。

. 小心而稳固地推入 NVDIMM 的上边缘，直到推出器卡舌卡入到位，位于 NVDIMM 两端的缺口上。
. 重复上述步骤以移动另一个 NVDIMM 。




== 第 8 步：移动启动介质

将启动介质移至替换后的控制器模块。

.步骤
. 找到 Riser 3 下方的启动介质。
+
image::../media/drw_a800_pcm_replace_only_boot_media.png[取出启动介质]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["标注编号1"]
 a| 
通风管



 a| 
image:../media/icon_round_2.png["标注编号2"]
 a| 
提升板 3



 a| 
image:../media/icon_round_3.png["标注编号3"]
 a| 
1 号十字螺丝刀



 a| 
image:../media/icon_round_4.png["标注编号4"]
 a| 
启动介质螺钉



 a| 
image:../media/icon_round_5.png["标注编号5"]
 a| 
启动介质

|===
. 从控制器模块中取出启动介质：
+
.. 使用 1 号十字螺丝刀卸下固定启动介质的螺钉，并将螺钉放在安全位置。
.. 抓住启动介质的两侧，将启动介质轻轻向上旋转，然后将启动介质竖直拉出插槽并放在一旁。


. 将启动介质移至新控制器模块并安装：
+
.. 将启动介质的边缘与插槽外壳对齐，然后将其轻轻直推入插槽。
.. 将启动介质向下旋转到主板。
.. 使用启动介质螺钉将启动介质固定到主板。
+
请勿过度拧紧螺钉，否则可能会损坏启动介质。







== 第 9 步：安装 PCIe 提升板

将立管安装到替换控制器模块中。

.步骤
. 将此提升板安装到更换用的控制器模块中：
+
.. 将竖板的边缘与控制器模块金属板的下侧对齐。
.. 沿着控制器模块中的插脚引导此提升板，然后将此提升板降低到控制器模块中。
.. 向下转动锁定闩锁并将其卡入锁定位置。
+
锁定后，锁定闩锁将与提升板顶部平齐，而提升板恰好位于控制器模块中。

.. 重新插入从 PCIe 卡中卸下的所有 SFP 或 QSFP 模块。


. 对其余 PCIe 提升板重复上述步骤。




== 第 10 步：安装控制器模块

重新安装控制器模块并重新启动。

.步骤
. 将控制器模块的末端与机箱中的开口对齐，然后将控制器模块轻轻推入系统的一半。
+

NOTE: 请勿将控制器模块完全插入机箱中，除非系统指示您这样做。

. 根据需要重新对系统进行布线。
+
如果您已卸下介质转换器（ QSFP 或 SFP ），请记得在使用光缆时重新安装它们。

. 完成控制器模块的重新安装：
+
.. 将控制器模块牢牢推入机箱，直到它与中板相距并完全就位。
+
控制器模块完全就位后，锁定闩锁会上升。

+

NOTE: 将控制器模块滑入机箱时，请勿用力过大，以免损坏连接器。

.. 向上旋转锁定闩锁，使其倾斜，以清除锁定销，然后将其降低到锁定位置。
.. 将电源线插入电源、重新安装电源线锁环、然后将电源连接到电源。
+
电源恢复后、控制器模块将立即启动。Be prepared to interrupt the boot process.

.. 如果尚未重新安装缆线管理设备，请重新安装该设备。


. 通过交还存储使受损控制器恢复正常运行：
+
`storage failover giveback -ofnode _impaired_node_name_`(英文)

. 如果已禁用自动交还、请重新启用它：
+
`storage failover modify -node local -auto-giveback true`(英文)

. 如果启用了AutoSupport、则还原/取消禁止自动创建案例：
+
`system node autosupport invoke -node * -type all -message MAINT=END`(英文)



.下一步是什么？
更换故障的A800控制器后，您需要：link:controller-replace-system-config-restore-and-verify.html["还原系统配置"]
