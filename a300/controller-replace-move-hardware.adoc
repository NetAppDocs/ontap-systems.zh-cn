---
permalink: a300/controller-replace-move-hardware.html 
sidebar: sidebar 
keywords: aff a300, move the controller module hardware 
summary: 要更换控制器模块硬件，您必须卸下受损节点，将 FRU 组件移至更换用的控制器模块，在机箱中安装更换用的控制器模块，然后将系统启动至维护模式。 
---
= 更换控制器模块— AFF A300
:icons: font
:imagesdir: ../media/


[role="lead"]
要更换控制器模块硬件，您必须卸下受损节点，将 FRU 组件移至更换用的控制器模块，在机箱中安装更换用的控制器模块，然后将系统启动至维护模式。



== 第 1 步：打开控制器模块

[role="lead"]
要更换控制器模块，必须先从机箱中卸下旧控制器模块。

. 如果您尚未接地，请正确接地。
. 松开将缆线绑在缆线管理设备上的钩环带，然后从控制器模块上拔下系统缆线和 SFP （如果需要），并跟踪缆线的连接位置。
+
将缆线留在缆线管理设备中，以便在重新安装缆线管理设备时，缆线排列有序。

. 从控制器模块的左右两侧卸下缆线管理设备并将其放在一旁。
+
image::../media/drw_32xx_cbl_mgmt_arm.png[DRW 32xx 电缆管理臂]

. 如果您在拔下缆线后将 SFP 模块留在系统中，请将其移至新控制器模块。
. 松开控制器模块凸轮把手上的翼形螺钉。
+
image::../media/drw_8020_cam_handle_thumbscrew.png[DRW 8020 凸轮把手翼形螺钉]

+
|===


 a| 
image:../media/legend_icon_01.png[""]
| 翼形螺钉 


 a| 
image:../media/legend_icon_02.png[""]
 a| 
凸轮把手

|===
. 向下拉凸轮把手，开始将控制器模块滑出机箱。
+
将控制器模块滑出机箱时，请确保您支持控制器模块的底部。





== 第 2 步：移动启动设备

[role="lead"]
您必须找到启动介质并按照说明将其从旧控制器中取出并将其插入新控制器中。

. 使用下图或控制器模块上的 FRU 映射找到启动介质：
+
image::../media/drw_rxl_boot_media.png[DRW rxl 启动介质]

. 按启动介质外壳上的蓝色按钮，将启动介质从其外壳中释放，然后将其竖直拉出启动介质插槽。
+

NOTE: 请勿将启动介质竖直向上扭曲或拉，因为这样可能会损坏插槽或启动介质。

. 将启动介质移至新控制器模块，将启动介质的边缘与插槽外壳对齐，然后将其轻轻推入插槽。
. 检查启动介质，确保其完全固定在插槽中。
+
如有必要，请取出启动介质并将其重新插入插槽。

. 向下推启动介质以接合启动介质外壳上的锁定按钮。




== 第 3 步：移动 NVMEM 电池

[role="lead"]
要将 NVMEM 电池从旧控制器模块移至新控制器模块，您必须执行一系列特定步骤。

. 检查 NVMEM LED ：
+
** 如果您的系统采用 HA 配置，请转至下一步。
** 如果您的系统采用独立配置，请完全关闭控制器模块，然后检查 NV 图标标识的 NVRAM LED 。
+
image::../media/drw_hw_nvram_icon.png[DRW 硬件 NVRAM 图标]

+

NOTE: 在暂停系统时， NVRAM LED 会闪烁，同时将内容存入闪存。目标值完成后，此 LED 将熄灭。

+
*** 如果在未完全关闭的情况下断电， NVMEM LED 将闪烁，直到目标完成，然后 LED 将熄灭。
*** 如果 LED 亮起且电源打开，则未写入的数据将存储在 NVMEM 上。
+
此问题通常发生在 ONTAP 成功启动后不受控制的关闭期间。





. 打开 CPU 通风管并找到 NVMEM 电池。
+
image::../media/drw_rxl_nvmem_battery.png[DRW rxl nvmem 电池]

+
|===


 a| 
image:../media/legend_icon_01.png[""]
| 电池锁定卡舌 


 a| 
image:../media/legend_icon_02.png[""]
 a| 
NVMEM 电池组

|===
. 抓住电池并按下标记为推送的蓝色锁定卡舌，然后将电池从电池架和控制器模块中提出。
. 从控制器模块中取出电池并将其放在一旁。




== 第 4 步：移动 DIMM

[role="lead"]
要移动 DIMM ，请找到 DIMM 并将其从旧控制器移至更换控制器，然后按照特定步骤顺序进行操作。

. 找到控制器模块上的 DIMM 。
. 记下插槽中 DIMM 的方向，以便可以按正确的方向将 DIMM 插入更换用的控制器模块中。
. 缓慢推动 DIMM 两侧的两个 DIMM 弹出卡舌，将 DIMM 从插槽中弹出，然后将 DIMM 滑出插槽。
+

NOTE: 小心握住 DIMM 的边缘，以避免对 DIMM 电路板上的组件施加压力。

+
系统 DIMM 的数量和位置取决于系统型号。

+
下图显示了系统 DIMM 的位置：

+
image::../media/drw_rxl_dimms.png[DRW rxl DIMM]

. 找到要安装 DIMM 的插槽。
. 确保连接器上的 DIMM 弹出器卡舌处于打开位置，然后将 DIMM 垂直插入插槽。
+
DIMM 紧紧固定在插槽中，但应很容易插入。如果没有，请将 DIMM 与插槽重新对齐并重新插入。

+

NOTE: 目视检查 DIMM ，确认其均匀对齐并完全插入插槽。

. 对其余 DIMM 重复上述步骤。
. 将 NVMEM 电池移至更换用的控制器模块。
. 将电池架上的卡舌或卡舌与控制器模块侧的槽口对齐，然后向下轻推电池外壳，直到电池外壳卡入到位。




== 第 5 步：移动 PCIe 卡

[role="lead"]
要移动 PCIe 卡，请找到它们并将其从旧控制器移至更换控制器，然后按照特定步骤顺序进行操作。

您必须准备好新控制器模块，以便可以将 PCIe 卡直接从旧控制器模块移至新控制器模块中的相应插槽。

. 松开控制器模块侧面板上的翼形螺钉。
. 将侧面板从控制器模块上摆动。
+
image::../media/drw_rxl_pcie.png[DRW rxl PCIe]

+
|===


 a| 
image:../media/legend_icon_01.png[""]



 a| 
侧面板



 a| 
image:../media/legend_icon_02.png[""]



 a| 
PCIe 卡

|===
. 从旧控制器模块中卸下 PCIe 卡并将其放在一旁。
+
确保跟踪 PCIe 卡所在的插槽。

. 对旧控制器模块中的其余 PCIe 卡重复上述步骤。
. 如有必要，打开新控制器模块侧面板，根据需要滑出 PCIe 卡填充板，然后小心安装 PCIe 卡。
+
确保将卡正确对齐在插槽中，并在插槽中插入卡时对卡施加均匀的压力。卡必须完全均匀地固定在插槽中。

. 对预留的其余 PCIe 卡重复上述步骤。
. 合上侧面板并拧紧翼形螺钉。




== 第 6 步：安装控制器

[role="lead"]
将旧控制器模块中的组件安装到新控制器模块中后，必须将新控制器模块安装到系统机箱中并启动操作系统。

对于在同一机箱中具有两个控制器模块的 HA 对，安装控制器模块的顺序尤为重要，因为一旦将其完全装入机箱，它就会尝试重新启动。


NOTE: 系统可能会在启动时更新系统固件。请勿中止此过程。操作步骤要求您中断启动过程，您通常可以在系统提示时随时中断启动过程。但是，如果系统在启动时更新了系统固件，则必须等到更新完成后再中断启动过程。

. 如果您尚未接地，请正确接地。
. 如果尚未关闭 CPU 通风管，请关闭此通风管。
. 将控制器模块的末端与机箱中的开口对齐，然后将控制器模块轻轻推入系统的一半。
+

NOTE: 请勿将控制器模块完全插入机箱中，除非系统指示您这样做。

. 仅为管理和控制台端口布线，以便您可以访问系统以执行以下各节中的任务。
+

NOTE: 您将在此操作步骤中稍后将其余缆线连接到控制器模块。

. 完成控制器模块的重新安装：
+
[cols="1,2"]
|===
| 如果您的系统位于 ... | 然后执行以下步骤 ... 


 a| 
HA 对
 a| 
 The controller module begins to boot as soon as it is fully seated in the chassis. Be prepared to interrupt the boot process.
.. 在凸轮把手处于打开位置的情况下，用力推入控制器模块，直到它与中板并完全就位，然后将凸轮把手合上到锁定位置。拧紧控制器模块背面凸轮把手上的翼形螺钉。
+

NOTE: 将控制器模块滑入机箱时，请勿用力过大，以免损坏连接器。

+
控制器一旦固定在机箱中，就会开始启动。

.. 如果尚未重新安装缆线管理设备，请重新安装该设备。
.. 使用钩环带将缆线绑定到缆线管理设备。
.. 当您看到消息 `Press Ctrl-C for Boot Menu` 时，按 `Ctrl-C` 以中断启动过程。
+

NOTE: 如果您未看到此提示，而控制器模块启动到 ONTAP ，请输入 `halt` ，然后在 LOADER 提示符处输入 `boot_ontap` ，并在出现提示时按 `Ctrl-C` ，然后启动到维护模式。

.. 从显示的菜单中选择启动至维护模式的选项。




 a| 
一种独立配置
 a| 
.. 在凸轮把手处于打开位置的情况下，用力推入控制器模块，直到它与中板并完全就位，然后将凸轮把手合上到锁定位置。拧紧控制器模块背面凸轮把手上的翼形螺钉。
+

NOTE: 将控制器模块滑入机箱时，请勿用力过大，以免损坏连接器。

.. 如果尚未重新安装缆线管理设备，请重新安装该设备。
.. 使用钩环带将缆线绑定到缆线管理设备。
.. 将电源线重新连接到电源和电源，打开电源以启动启动过程，然后在看到 `Press Ctrl-C for Boot Menu` 消息后按 `Ctrl-C` 。
+

NOTE: 如果您未看到此提示，而控制器模块启动到 ONTAP ，请输入 `halt` ，然后在 LOADER 提示符处输入 `boot_ontap` ，并在出现提示时按 `Ctrl-C` ，然后启动到维护模式。

.. 从启动菜单中，选择维护模式选项。


|===
+
* 重要信息： * 在启动过程中，您可能会看到以下提示：

+
** 系统 ID 不匹配的提示警告，并要求覆盖系统 ID 。
** 一条提示，警告您在 HA 配置中进入维护模式时必须确保运行正常的节点保持关闭状态。您可以安全地对这些提示回答 `y` 。



