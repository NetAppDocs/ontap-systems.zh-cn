---
permalink: a300/bootmedia-replace.html 
sidebar: sidebar 
keywords: aff a300, aff, a300, locate, boot, media, controller, direction, replace, replace the boot media 
summary: 您必须在控制器中找到启动介质并按照说明进行更换。 
---
= 卸下控制器模块，更换启动介质并将启动映像传输到启动介质— AFF A300
:icons: font
:imagesdir: ../media/


要更换启动介质，您必须卸下受损的控制器模块，安装替代启动介质并将启动映像传输到 USB 闪存驱动器。



== 第 1 步：卸下控制器模块

[role="lead"]
要访问控制器内部的组件，您必须先从系统中卸下控制器模块，然后再卸下控制器模块上的盖板。

. 如果您尚未接地，请正确接地。
. 松开将缆线绑在缆线管理设备上的钩环带，然后从控制器模块上拔下系统缆线和 SFP （如果需要），并跟踪缆线的连接位置。
+
将缆线留在缆线管理设备中，以便在重新安装缆线管理设备时，缆线排列有序。

. 从控制器模块的左右两侧卸下缆线管理设备并将其放在一旁。
+
image::../media/drw_32xx_cbl_mgmt_arm.png[DRW 32xx 电缆管理臂]

. 松开控制器模块凸轮把手上的翼形螺钉。
+
image::../media/drw_8020_cam_handle_thumbscrew.png[DRW 8020 凸轮把手翼形螺钉]

+
|===


 a| 
image:../media/legend_icon_01.png[""]
 a| 
翼形螺钉



 a| 
image:../media/legend_icon_02.png[""]
 a| 
凸轮把手

|===
. 向下拉凸轮把手，开始将控制器模块滑出机箱。
+
将控制器模块滑出机箱时，请确保您支持控制器模块的底部。





== 第 2 步：更换启动介质— AFF A300

[role="lead"]
您必须在控制器中找到启动介质并按照说明进行更换。

. 如果您尚未接地，请正确接地。
. 使用下图或控制器模块上的 FRU 映射找到启动介质：
+
image::../media/drw_rxl_boot_media.png[DRW rxl 启动介质]

. 按启动介质外壳上的蓝色按钮，将启动介质从其外壳中释放，然后将其竖直拉出启动介质插槽。
+

NOTE: 请勿将启动介质竖直向上扭曲或拉，因为这样可能会损坏插槽或启动介质。

. 将替代启动介质的边缘与启动介质插槽对齐，然后将其轻轻推入插槽。
. 检查启动介质，确保其完全固定在插槽中。
+
如有必要，请取出启动介质并将其重新插入插槽。

. 向下推启动介质以接合启动介质外壳上的锁定按钮。
. 合上控制器模块外盖。




== 第 3 步：将启动映像传输到启动介质

[role="lead"]
您可以使用已安装映像的 USB 闪存驱动器将系统映像安装到替代启动介质。但是，您必须在此操作步骤期间还原 var 文件系统。

* 您必须具有一个已格式化为 32 位的 USB 闪存驱动器，并且容量至少为 4 GB 。
* 与受损控制器运行的 ONTAP 映像版本相同的副本。您可以从 NetApp 支持站点上的 "Downloads" 部分下载相应的映像
+
** 如果启用了 NVE ，请按照下载按钮中的指示，使用 NetApp 卷加密下载映像。
** 如果未启用 NVE ，请按照下载按钮中的指示，在不使用 NetApp 卷加密的情况下下载映像。


* 如果您的系统是 HA 对，则必须具有网络连接。
* 如果您的系统是独立系统，则不需要网络连接，但在还原 var 文件系统时，您必须执行额外的重新启动。
+
.. 将控制器模块的末端与机箱中的开口对齐，然后将控制器模块轻轻推入系统的一半。
.. 重新安装缆线管理设备，并根据需要重新对系统进行布线。
+
重新布线时，如果已卸下介质转换器（ SFP ），请务必重新安装它们。

.. 将 USB 闪存驱动器插入控制器模块上的 USB 插槽。
+
确保将 USB 闪存驱动器安装在标有 USB 设备的插槽中，而不是 USB 控制台端口中。

.. 将控制器模块完全推入系统中，确保凸轮把手离开 USB 闪存驱动器，用力推动凸轮把手以完成控制器模块的就位，将凸轮把手推至关闭位置，然后拧紧翼形螺钉。
+
一旦节点完全安装到机箱中，它就会开始启动。

.. 按 Ctrl-C 中断启动过程，并在加载程序提示符处停止。如果看到正在启动自动启动，请按 Ctrl-C 中止 ...
+
如果未显示此消息，请按 Ctrl-C ，选择选项以启动到维护模式，然后暂停节点以启动到加载程序。

.. 对于机箱中有一个控制器的系统，重新连接电源并打开电源。
+
系统开始启动并停留在 LOADER 提示符处。

.. 尽管环境变量和 bootarg 已保留，但您应使用 `printenv bootarg name` 命令检查是否已为您的系统类型和配置正确设置所有必需的启动环境变量和 bootarg ，并使用 `setenv variable-name <value>` 命令更正任何错误。
+
... 检查启动环境变量：
+
**** `bootarg.init.boot_clustered`
**** `partner-sysid`
**** `bootarg.init.flash_optimized`
**** `bootarg.init.switchless_cluster.enable`


... 如果已启用外部密钥管理器，请检查 `kenv` ASUP 输出中列出的 bootarg 值：
+
**** `bootarg.storageencryption.support <value>`
**** `bootarg.keymanager.support <value>`
**** `kmip.init.interface <value>`
**** `kmip.init.ipaddr <value>`
**** `kmip.init.netmask <value>`
**** `kmip.init.gateway <value>`


... 如果启用了板载密钥管理器，请检查 `kenv` ASUP 输出中列出的 bootarg 值：
+
**** `bootarg.storageencryption.support <value>`
**** `bootarg.keymanager.support <value>`
**** `bootarg.bontery_keymanager <value>`


... 保存使用 `savenv` 命令更改的环境变量
... 使用 `printenv _variable-name_` 命令确认所做的更改。


.. 在 LOADER 提示符处设置网络连接类型：
+
*** 如果要配置 DHCP ： `ifconfig e0a -auto`
+

NOTE: 您配置的目标端口是在使用网络连接还原 var 文件系统期间，用于与运行正常的节点中受损节点进行通信的目标端口。您也可以在此命令中使用 e0M 端口。

*** 如果要配置手动连接： `ifconfig e0a -addr=filer_addr -mask=netmask -gw=gateway-dns=dns_addr-domain=dns_domain`
+
**** filer_addr 是存储系统的 IP 地址。
**** netmask 是连接到 HA 配对节点的管理网络的网络掩码。
**** gateway 是网络的网关。
**** dns_addr 是网络上名称服务器的 IP 地址。
**** dns_domain 是域名系统（ DNS ）域名。
+
如果使用此可选参数，则无需在网络启动服务器 URL 中使用完全限定域名。您只需要服务器的主机名。





+

NOTE: 您的接口可能需要其他参数。有关详细信息，可以在固件提示符处输入 `help ifconfig` 。

.. 如果控制器位于延伸型或光纤连接的 MetroCluster 中，则必须还原 FC 适配器配置：
+
... 启动到维护模式： `boot_ontap maint`
... 将 MetroCluster 端口设置为启动程序： `ucadmin modify -m fc -t _initiator adapter_name_`
... halt 返回维护模式： `halt`




+
这些更改将在系统启动时实施。


